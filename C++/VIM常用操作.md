# VIM常用操作

## 1. 命令模式

**跳转到首行（文件）：** gg

**跳转到末行（文件）：** G

**跳转到行首：** $

**跳转到行尾：** 0

**删除一个字符：** s

**剪切当前行：** dd

**复制3行：** 3yy

<font color=red>**复制文件所有内容：**</font> ggvG之后输入yy

**粘贴：** p

**进入可视模式：** V

**进入可视块模式： ctrl + v

<font color=red>**删除所有文件内容：**</font>  ggdG



<font color=red>**查找文件：**</font>

```shell
:/word  
```

举例：查找niu0217，就输入`:/niu0217`之后查找下一个n，上一个N。



<font color=red>**替换当前行中的文字：**</font>

```sh
:s/word1/word2/g
```

举例：将niufdbfdfudbf中的niu替换成niu0217 输入：`:s/niu/niu0217/s`



<font color=red>**替换所有行中的文字：**</font>

```sh
:%s/word1/word2/g
```

举例：将文件中所有的niu 换成niu0217

​			输入：`:%s/niu/niu0217/g`



<font color=red>**取消查找之后的高亮：**</font>

```sh
:noh
```



## 2. 分屏操作

```
命令     | 代表的含义
:--------: | -----
:sp | 上下分屏
:vsp  | 左右分屏					
ctrl + ww  | 窗口间切换
```

|   命令    | 代表的含义 |
| :-------: | ---------- |
|    :sp    | 上下分屏   |
|   :vsp    | 左右分屏   |
| ctrl + ww | 窗口间切换 |



## 3. VIM打开文件

```
命令     | 代表的含义
-------- | -----
vi filename  | 打开或者新建一个文件，并将光标置于第一行的首部	
vi -r filename  | 恢复上次vim打开时崩溃的文件					
vim -R filename  | 把指定的文件以只读的方式放入到Vim编辑器			
vi + n + filename  | 打开文件并将光标置于第n行的首部 
```

| 命令              | 代表的含义                                     |
| ----------------- | ---------------------------------------------- |
| vi filename       | 打开或者新建一个文件，并将光标置于第一行的首部 |
| vi -r filename    | 恢复上次vim打开时崩溃的文件                    |
| vim -R filename   | 把指定的文件以只读的方式放入到Vim编辑器        |
| vi + n + filename | 打开文件并将光标置于第n行的首部                |



## 4. VIM保存退出文本

```
命令     | 代表的含义
-------- | -----
:wq | 保存并退出Vim编辑器
:wq!  | 保存并强制退出Vim编辑器	
:q  | 不保存就退出Vim编辑器		
:q! | 不保存，且强制退出Vim编辑器
:w | 保存但是不退出Vim编辑器 
:w! | 强制保存文本
:w filename | 另存到filename文件
:x! | 保存文本，并退出Vim编辑器，更通用的一个Vim命令
:ZZ | 直接退出Vim编辑器
```

| 命令        | 代表的含义                                     |
| ----------- | ---------------------------------------------- |
| :wq         | 保存并退出Vim编辑器                            |
| :wq!        | 保存并强制退出Vim编辑器                        |
| :q          | 不保存就退出Vim编辑器                          |
| :q!         | 不保存，且强制退出Vim编辑器                    |
| :w          | 保存但是不退出Vim编辑器                        |
| :w!         | 强制保存文本                                   |
| :w filename | 另存到filename文件                             |
| :x!         | 保存文本，并退出Vim编辑器，更通用的一个Vim命令 |
| :ZZ         | 直接退出Vim编辑器                              |



## 5. 使用VIM进行编辑

### 5.1 vim插入文本

从命令模式进入输入模式进行编辑，可以按下I,i,O,o,A,a等键来完成，使用不同的键，光标所处的位置不同，如下表所示：

```
快捷键     | 功能描述
-------- | -----
i  | 在当前光标所在位置插入随后输入的文本，光标后的文本相应向右移动
I  | 在光标所在行的行首插入随后输入的文本，行首是该行的第一个非空白字符，相当于光标移动到行首执行i命令					
o  | 在光标所在行的下面插入新的一行，光标停在空行首，等待输入文本			
O  | 在光标所在行的上面插入新的一行，光标停在空行的行首，等待输入文本
a  | 在光标所在位置之后插入随后输入的文本
A  | 在光标所在行的行尾插入随后输入的文本，相当于光标移动到行尾在执行a命令
```

| 快捷键 | 功能描述                                                     |
| ------ | ------------------------------------------------------------ |
| i      | 在当前光标所在位置插入随后输入的文本，光标后的文本相应向右移动 |
| I      | 在光标所在行的行首插入随后输入的文本，行首是该行的第一个非空白字符，相当于光标移动到行首执行i命令 |
| o      | 在光标所在行的下面插入新的一行，光标停在空行首，等待输入文本 |
| O      | 在光标所在行的上面插入新的一行，光标停在空行的行首，等待输入文本 |
| a      | 在光标所在位置之后插入随后输入的文本                         |
| A      | 在光标所在行的行尾插入随后输入的文本，相当于光标移动到行尾在执行a命令 |

### 5.2 vim查找文本

```
快捷键     | 功能描述
-------- | -----
/abc  | 在当前光标所在位置插入随后输入的文本，光标后的文本相应向右移动
?abc  | 在光标所在行的上面插入新的一行，光标停在空行的行首，等待输入文本
/^abc  | 在光标所在行的行首插入随后输入的文本，行首是该行的第一个非空白字符，相当于光标移动到行首执行i命令					
/abc$  | 在光标所在行的下面插入新的一行，光标停在空行首，等待输入文本			
n  | 在光标所在位置之后插入随后输入的文本
N  | 在光标所在行的行尾插入随后输入的文本，相当于光标移动到行尾在执行a命令
:set ic  | 查找忽略大小写
:set noic | 调整回来，查找不忽略大小写
```

| 快捷键    | 功能描述                                                     |
| --------- | ------------------------------------------------------------ |
| /abc      | 在当前光标所在位置插入随后输入的文本，光标后的文本相应向右移动 |
| ?abc      | 在光标所在行的上面插入新的一行，光标停在空行的行首，等待输入文本 |
| /^abc     | 在光标所在行的行首插入随后输入的文本，行首是该行的第一个非空白字符，相当于光标移动到行首执行i命令 |
| /abc$     | 在光标所在行的下面插入新的一行，光标停在空行首，等待输入文本 |
| n         | 在光标所在位置之后插入随后输入的文本                         |
| N         | 在光标所在行的行尾插入随后输入的文本，相当于光标移动到行尾在执行a命令 |
| :set ic   | 查找忽略大小写                                               |
| :set noic | 调整回来，查找不忽略大小写                                   |

<font color=red>**注意：**</font>

+ 查找过程中是严格区分大小写的。
+ 如果在字符串中出现特殊符号，则需要加上转义字符“\”。常见的特殊符号有`\ `     `*`     `?`     `$`。如果出现这些字符，比如，查找字符串“10$”，则需要在命令模式中输入`/10\$`。

### 5.3 vim替换文本

```
快捷键     | 功能描述
-------- | -----
r  | 替换光标所在位置的字符
R  | 从光标所在位置开始替换字符，其输入内容会覆盖掉后面等长的文本内容，按esc可以结束
:s/a1/a2/g  | 将当前光标所在行中的所有a1用a2替换
:n1,n2s/a1/a2/g  | 将文件中n1到n2行中所有a1都用a2替换
:g/a1/a2/g | 将文件中所有的a1都用a2替换
```

| 快捷键          | 功能描述                                                     |
| --------------- | ------------------------------------------------------------ |
| r               | 替换光标所在位置的字符                                       |
| R               | 从光标所在位置开始替换字符，其输入内容会覆盖掉后面等长的文本内容，按esc可以结束 |
| :s/a1/a2/g      | 将当前光标所在行中的所有a1用a2替换                           |
| :n1,n2s/a1/a2/g | 将文件中n1到n2行中所有a1都用a2替换                           |
| :g/a1/a2/g      | 将文件中所有的a1都用a2替换                                   |

例如，要将某文件中所有的 "root" 替换为 "liudehua"，则有两种输入命令，分别为：

:1, $s/root/liudehua/g
或
:%s/root/liudehua/g

上述命令是在编辑模式下操作的，表示的是从第一行到最后一行，即全文查找 "root"，然后替换成 "liudehua"。

如果刚才的命令变成 `:10,20 s/root/liudehua/g`，则只替换从第 10 行到第 20 行的 "root"。

### 5.4 Vim删除文本

```
命令     | 代表的含义
:--------: | :-----
 x  | 删除光标所在行的一个字符	
 s  | 删除光标所在的一个字符并进入可编辑模式
dd  | 删除光标所在行					
ndd  | 删除当前行（包括此行）后n行文本			
dG  | 删除光标所在行一直到文件末尾的所有内容
 D | 删除光标位置到行尾的内容
 d0 | 删除光标位置到行首的内容
 d$ | 删除光标位置到行尾的内容
 :a1,a2d | 删除从a1到a2行的文本内容
```

|  命令   | 代表的含义                             |
| :-----: | :------------------------------------- |
|    x    | 删除光标所在行的一个字符               |
|    s    | 删除光标所在的一个字符并进入可编辑模式 |
|   dd    | 删除光标所在行                         |
|   ndd   | 删除当前行（包括此行）后n行文本        |
|   dG    | 删除光标所在行一直到文件末尾的所有内容 |
|    D    | 删除光标位置到行尾的内容               |
|   d0    | 删除光标位置到行首的内容               |
|   d$    | 删除光标位置到行尾的内容               |
| :a1,a2d | 删除从a1到a2行的文本内容               |

<font color=red>**注意：**</font>被删除的内容并没有被真正的删除，都放在了剪贴板中。将光标移动到指定位置处，按下“p”键，就可以将刚才删除的内容又粘贴回此处。		

### 5.5 vim复制和粘贴文本

```
命令     | 代表的含义
:--------: | :-----
p  | 将剪贴板中的内容粘贴到光标后
P | 将剪贴版中的内容粘贴到光标前
y | 复制已选中的文本到剪贴板	
yy  | 将光标所在行复制到剪贴板，此命令前可以加数字n，可复制多行
yw  | 将光标位置的单词复制到剪贴板
```

| 命令 | 代表的含义                                                |
| :--: | :-------------------------------------------------------- |
|  p   | 将剪贴板中的内容粘贴到光标后                              |
|  P   | 将剪贴版中的内容粘贴到光标前                              |
|  y   | 复制已选中的文本到剪贴板                                  |
|  yy  | 将光标所在行复制到剪贴板，此命令前可以加数字n，可复制多行 |
|  yw  | 将光标位置的单词复制到剪贴板                              |

### 5.6 vim选中文本

```
命令     | 代表的含义
:--------: | :-----
v  | 字符模式(Character mode) 页面底部会出现-- VISUAL --的字样。
V | 行模式(Line mode) 页面底部会出现-- VISUAL LINE --的字样
control + v | 	块模式(Block mode) 页面底部会出现-- VISUAL BLOCK --的字样
```

|    命令     | 代表的含义                                                  |
| :---------: | :---------------------------------------------------------- |
|      v      | 字符模式(Character mode) 页面底部会出现-- VISUAL --的字样。 |
|      V      | 行模式(Line mode) 页面底部会出现-- VISUAL LINE --的字样     |
| control + v | 块模式(Block mode) 页面底部会出现-- VISUAL BLOCK --的字样   |



## 6. PowerVim操作

```
正常模式下的快捷键（非插入模式）
;n              // 打开文件目录树显示在屏幕左侧
;m              // 打开当前函数和变量目录树显示在屏幕右侧
;h              // 光标移动到左窗口 
;l              // 光标移动到右窗口
;k              // 光标移动到上窗口
;j              // 光标移动到下窗口 以上四个快捷键特别是打开多个窗口情况下。使用这个快捷键组合非常实用
;w              // 保存文件
;u              // 向上翻半屏
;d              // 向下翻半屏
;1              // 光标快速移动到行首
;2              // 光标快速移动到行末
;a              // 快速切换.h和cpp文件，写C++的时候很方便
;e              // 打开一个新文件
;z              // 切回shell交互命令，输入fg在切回vim，非常实用
;s              // 水平分屏，并打开文件目录选取想打开的文件，如果想新建文件，;e 就好 
;v              // 竖直分屏，并打开文件目录选取想打开的文件，如果想新建文件，;e 就好 
;fw             // 查找项目内关键字，前提是你的系统已经按照了ACK 
;ff             // 查找项目内文件名 
;gt             // 跳转到变量或者函数定义的地方，前提是安装ctags，并且在在PowerVim输入 ;tg命令 Jump to the definition of the keyword where the cursor is located, but make sure you have make ctags
;gr             // 跳回，对应着;gt
;tg             // 对当前目录打ctag 
;y              // 保存当前选中的目录到系统剪切板，前提是vim支持系统剪切板的寄存器
;gg             // 按顺序光标跳转各个窗口

// 一下快捷键是不用;的，直接在 非插入模式 下输入
e               // 快速删除光标所在的词 
tabc            // 关闭当前tab，可以用:tabnew来打开一个新的tab Close tab, of course you should :tabnew a file first. 
F1              // 编译并运行C++文件，自己写的C++例子的时候一键编译。前提手动在当前目录建一个bin文件夹，这是用来存放编译产生的执行文件 
F1              // 编译Java文件
F2              // 运行Java编译的class文件，一般如果要编译并运行Java文件 按F1编译，在按F2运行
gc              // 快速注释选中的块（是visual模式下选中的块） 
gcc             // 快速当前行
{               // 光标向上移动一个代码块
}               // 光标向下移动一个代码块
di(             // 删除括号里的内容
di{             // 删除花括号里的内容
```



 

























